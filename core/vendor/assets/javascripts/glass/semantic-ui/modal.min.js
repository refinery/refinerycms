 /*
 * # Semantic UI
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,i,n,o){"use strict";e.fn.modal=function(t){var s,a=e(this),r=e(i),c=e(n),u=e("body"),l=a.selector||"",d=(new Date).getTime(),m=[],f=arguments[0],g="string"==typeof f,h=[].slice.call(arguments,1),v=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame||function(e){setTimeout(e,0)};return a.each(function(){var a,b,p,y,w,k,S,x,A,D=e.isPlainObject(t)?e.extend(!0,{},e.fn.modal.settings,t):e.extend({},e.fn.modal.settings),M=D.selector,C=D.className,H=D.namespace,z=D.error,F="."+H,T="module-"+H,O=e(this),q=e(D.context),E=O.find(M.close),j=this,I=O.data(T);A={initialize:function(){return A.verbose("Initializing dimmer",q),A.create.id(),e.fn.dimmer===o?void A.error(z.dimmer):(y=q.dimmer({debug:D.debug,dimmerName:"modals",closable:!1,useCSS:!0,duration:{show:D.duration,hide:D.duration}}),D.detachable&&y.dimmer("add content",O),w=y.dimmer("get dimmer"),A.refreshModals(),A.verbose("Attaching close events",E),A.bind.events(),A.observeChanges(),void A.instantiate())},instantiate:function(){A.verbose("Storing instance of modal"),I=A,O.data(T,I)},create:{id:function(){A.verbose("Creating unique id for element"),S=A.get.uniqueID(),k="."+S}},destroy:function(){A.verbose("Destroying previous modal"),O.removeData(T).off(F),r.off(k),E.off(F),q.dimmer("destroy")},observeChanges:function(){"MutationObserver"in i&&(x=new MutationObserver(function(){A.debug("DOM tree modified, refreshing"),A.refresh()}),x.observe(j,{childList:!0,subtree:!0}),A.debug("Setting up mutation observer",x))},refresh:function(){A.remove.scrolling(),A.cacheSizes(),A.set.screenHeight(),A.set.type(),A.set.position()},refreshModals:function(){b=O.siblings(M.modal),a=b.add(O)},attachEvents:function(i,n){var o=e(i);n=e.isFunction(A[n])?A[n]:A.toggle,o.size()>0?(A.debug("Attaching modal events to element",i,n),o.off(F).on("click"+F,n)):A.error(z.notFound,i)},bind:{events:function(){E.on("click"+F,A.event.close),r.on("resize"+k,A.event.resize)}},get:{uniqueID:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{close:function(){A.verbose("Closing element pressed"),e(this).is(M.approve)?e.proxy(D.onApprove,j)()!==!1?A.hide():A.verbose("Approve callback returned false cancelling hide"):e(this).is(M.deny)?e.proxy(D.onDeny,j)()!==!1?A.hide():A.verbose("Deny callback returned false cancelling hide"):A.hide()},click:function(i){0===e(i.target).closest(O).size()&&(A.debug("Dimmer clicked, hiding all modals"),A.is.active()&&(A.remove.clickaway(),D.allowMultiple?A.hide():A.hideAll()))},debounce:function(e,i){clearTimeout(A.timer),A.timer=setTimeout(e,i)},keyboard:function(e){var i=e.which,n=27;i==n&&(D.closable?(A.debug("Escape key pressed hiding modal"),A.hide()):A.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){y.dimmer("is active")&&v(A.refresh)}},toggle:function(){A.is.active()||A.is.animating()?A.hide():A.show()},show:function(i){i=e.isFunction(i)?i:function(){},A.refreshModals(),A.showModal(i)},hide:function(i){i=e.isFunction(i)?i:function(){},A.refreshModals(),A.hideModal(i)},showModal:function(i){i=e.isFunction(i)?i:function(){},A.is.animating()||!A.is.active()?(A.showDimmer(),A.cacheSizes(),A.set.position(),A.set.screenHeight(),A.set.type(),A.set.clickaway(),!D.allowMultiple&&b.filter(":visible").size()>0?(A.debug("Other modals visible, queueing show animation"),A.hideOthers(A.showModal)):(e.proxy(D.onShow,j)(),D.transition&&e.fn.transition!==o&&O.transition("is supported")?(A.debug("Showing modal with css animations"),O.transition({debug:D.debug,animation:D.transition+" in",queue:D.queue,duration:D.duration,useFailSafe:!0,onComplete:function(){e.proxy(D.onVisible,j)(),A.add.keyboardShortcuts(),A.save.focus(),A.set.active(),A.set.autofocus(),i()}})):(A.debug("Showing modal with javascript"),O.fadeIn(D.duration,D.easing,function(){e.proxy(D.onVisible,j)(),A.add.keyboardShortcuts(),A.save.focus(),A.set.active(),i()})))):A.debug("Modal is already visible")},hideModal:function(i){i=e.isFunction(i)?i:function(){},A.debug("Hiding modal"),e.proxy(D.onHide,j)(),(A.is.animating()||A.is.active())&&(D.transition&&e.fn.transition!==o&&O.transition("is supported")?(A.remove.active(),O.transition({debug:D.debug,animation:D.transition+" out",queue:D.queue,duration:D.duration,useFailSafe:!0,onStart:function(){A.othersActive()||A.hideDimmer(),A.remove.keyboardShortcuts()},onComplete:function(){e.proxy(D.onHidden,j)(),A.restore.focus(),i()}})):(A.remove.active(),A.othersActive()||A.hideDimmer(),A.remove.keyboardShortcuts(),O.fadeOut(D.duration,D.easing,function(){e.proxy(D.onHidden,j)(),A.restore.focus(),i()})))},showDimmer:function(){y.dimmer("is animating")||!y.dimmer("is active")?(A.debug("Showing dimmer"),y.dimmer("show")):A.debug("Dimmer already visible")},hideDimmer:function(){return y.dimmer("is animating")||y.dimmer("is active")?void y.dimmer("hide",function(){D.transition&&e.fn.transition!==o&&O.transition("is supported")&&(A.remove.clickaway(),A.remove.screenHeight())}):void A.debug("Dimmer is not visible cannot hide")},hideAll:function(i){i=e.isFunction(i)?i:function(){},a.is(":visible")&&(A.debug("Hiding all visible modals"),A.hideDimmer(),a.filter(":visible").modal("hide modal",i))},hideOthers:function(i){i=e.isFunction(i)?i:function(){},b.is(":visible")&&(A.debug("Hiding other modals",b),b.filter(":visible").modal("hide modal",i))},othersActive:function(){return b.filter("."+C.active).size()>0},add:{keyboardShortcuts:function(){A.verbose("Adding keyboard shortcuts"),c.on("keyup"+F,A.event.keyboard)}},save:{focus:function(){p=e(n.activeElement).blur()}},restore:{focus:function(){p&&p.size()>0&&p.focus()}},remove:{active:function(){O.removeClass(C.active)},clickaway:function(){D.closable&&w.off("click"+k)},screenHeight:function(){A.cache.height>A.cache.pageHeight&&(A.debug("Removing page height"),u.css("height",""))},keyboardShortcuts:function(){A.verbose("Removing keyboard shortcuts"),c.off("keyup"+F)},scrolling:function(){y.removeClass(C.scrolling),O.removeClass(C.scrolling)}},cacheSizes:function(){var t=O.outerHeight();(A.cache===o||0!==t)&&(A.cache={pageHeight:e(n).outerHeight(),height:t+D.offset,contextHeight:"body"==D.context?e(i).height():y.height()}),A.debug("Caching modal and container sizes",A.cache)},can:{fit:function(){return A.cache.height<A.cache.contextHeight}},is:{active:function(){return O.hasClass(C.active)},animating:function(){return O.transition("is supported")?O.transition("is animating"):O.is(":visible")},scrolling:function(){return y.hasClass(C.scrolling)},modernBrowser:function(){return!(i.ActiveXObject||"ActiveXObject"in i)}},set:{autofocus:function(){if(D.autofocus){var e=O.find(":input:visible"),i=e.filter("[autofocus]"),n=i.size()>0?i:e;n.first().focus()}},clickaway:function(){D.closable&&w.on("click"+k,A.event.click)},screenHeight:function(){A.cache.height>A.cache.pageHeight?(A.debug("Modal is taller than page content, resizing page height"),u.css("height",A.cache.height+D.padding)):u.css("height","")},active:function(){O.addClass(C.active)},scrolling:function(){y.addClass(C.scrolling),O.addClass(C.scrolling)},type:function(){A.can.fit()?(A.verbose("Modal fits on screen"),A.othersActive||A.remove.scrolling()):(A.verbose("Modal cannot fit on screen setting to scrolling"),A.set.scrolling())},position:function(){A.verbose("Centering modal on page",A.cache),O.css(A.can.fit()?{top:"",marginTop:-(A.cache.height/2)}:{marginTop:"",top:c.scrollTop()})}},setting:function(i,n){if(A.debug("Changing setting",i,n),e.isPlainObject(i))e.extend(!0,D,i);else{if(n===o)return D[i];D[i]=n}},internal:function(i,n){if(e.isPlainObject(i))e.extend(!0,A,i);else{if(n===o)return A[i];A[i]=n}},debug:function(){D.debug&&(D.performance?A.performance.log(arguments):(A.debug=Function.prototype.bind.call(console.info,console,D.name+":"),A.debug.apply(console,arguments)))},verbose:function(){D.verbose&&D.debug&&(D.performance?A.performance.log(arguments):(A.verbose=Function.prototype.bind.call(console.info,console,D.name+":"),A.verbose.apply(console,arguments)))},error:function(){A.error=Function.prototype.bind.call(console.error,console,D.name+":"),A.error.apply(console,arguments)},performance:{log:function(e){var i,n,o;D.performance&&(i=(new Date).getTime(),o=d||i,n=i-o,d=i,m.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(A.performance.timer),A.performance.timer=setTimeout(A.performance.display,100)},display:function(){var i=D.name+":",n=0;d=!1,clearTimeout(A.performance.timer),e.each(m,function(e,i){n+=i["Execution Time"]}),i+=" "+n+"ms",l&&(i+=" '"+l+"'"),(console.group!==o||console.table!==o)&&m.length>0&&(console.groupCollapsed(i),console.table?console.table(m):e.each(m,function(e,i){console.log(i.Name+": "+i["Execution Time"]+"ms")}),console.groupEnd()),m=[]}},invoke:function(i,n,t){var a,r,c,u=I;return n=n||h,t=j||t,"string"==typeof i&&u!==o&&(i=i.split(/[\. ]/),a=i.length-1,e.each(i,function(n,t){var s=n!=a?t+i[n+1].charAt(0).toUpperCase()+i[n+1].slice(1):i;if(e.isPlainObject(u[s])&&n!=a)u=u[s];else{if(u[s]!==o)return r=u[s],!1;if(!e.isPlainObject(u[t])||n==a)return u[t]!==o?(r=u[t],!1):!1;u=u[t]}})),e.isFunction(r)?c=r.apply(t,n):r!==o&&(c=r),e.isArray(s)?s.push(c):s!==o?s=[s,c]:c!==o&&(s=c),r}},g?(I===o&&A.initialize(),A.invoke(f)):(I!==o&&A.destroy(),A.initialize())}),s!==o?s:this},e.fn.modal.settings={name:"Modal",namespace:"modal",debug:!1,verbose:!0,performance:!0,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,context:"body",queue:!1,duration:500,easing:"easeOutExpo",offset:0,transition:"scale",padding:30,onShow:function(){},onHide:function(){},onVisible:function(){},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:".close, .actions .button",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",scrolling:"scrolling"}}}(jQuery,window,document);