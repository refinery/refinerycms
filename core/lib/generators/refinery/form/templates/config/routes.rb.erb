Refinery::Core::Engine.routes.draw do
  # Frontend routes
  namespace :<%= namespacing.underscore %>, :path => '' do
    get '/<%= plural_name %>', :to => '<%= plural_name %>#new', :as => 'new_<%= plural_name %>'

    resources :<%= plural_name %>, 
      :only => [:new, :create],
      :as => :<%= plural_name %>,
      :controller => '<%= plural_name %>' do
        get :thank_you, :on => :collection
      end

  # Admin routes
    namespace :admin, :path => "#{Refinery::Core.backend_route}/<%= namespacing.underscore %>" do
      resources :<%= plural_name %>, :path => '' <% if @includes_spam %> do
        collection do
          get :spam
        end
        member do
          get :toggle_spam
        end
      end<% end %>
      resources :settings, :only => [:edit, :update]
    end
  end
end
